---
title: AzPolicyTest Module Updated to 2.8.0
date: 2025-08-10 21:00
author: Tao Yang
permalink: /2025/08/10/azpolicytest-module-updated-to-2-8-0
summary:
categories:
  - Azure
tags:
  - Azure
  - Azure Policy
  - PowerShell
  - Pester
---

I have updated the AzPolicyTest PowerShell module ([GitHub](https://github.com/tyconsulting/AzPolicyTest), [PowerShell Gallery](https://www.powershellgallery.com/packages/AzPolicyTest/)) to `v2.8.0`. This release includes the following updates:

## New test to check if any referenced resource types are excluded from policy evaluation

Azure policy excludes several resource types when evaluating resources. these types are defined here:

- [Resources that are exempt from policy evaluation](https://github.com/azure/azure-policy?tab=readme-ov-file#resources-that-are-exempt-from-policy-evaluation)
- [Provider pass-through to non Azure Resource Manager resources](https://github.com/azure/azure-policy?tab=readme-ov-file#provider-pass-through-to-non-azure-resource-manager-resources)

Added a new test to check if any referenced resource types are from the lists above (using regex)

## Updated tests for Audit / Deny interchangeable effects to exclude auto-generated bypassed properties

Some properties are not available at resource creation time (not in the request payload). any policies targeting these properties cannot use `Deny` effect.([Optional or auto-generated resource property that bypasses policy evaluation](https://github.com/azure/azure-policy?tab=readme-ov-file#optional-or-auto-generated-resource-property-that-bypasses-policy-evaluation))

- Updated the existing tests for Audit / Deny interchangeable effects to exclude policies that are referencing these properties (using regex)
- Added new test to ensure any policies that are referencing these properties do have Deny as one of the allowed values for the policy effect.